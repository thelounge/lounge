/*
 *  embed-js - v4.1.6
 *  A JavaScript plugin that analyses the string and embeds emojis, media, tweets, code and services.
 *  http://riteshkr.com/embed.js
 *
 *  Made by Ritesh Kumar
 *  Under MIT License
 */
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.EmbedJS=b()}(this,function(){"use strict";function a(a,b){return b={exports:{}},a(b,b.exports,W),b.exports}function b(a,b){return a.substr(0,b-1)+(a.length>b?"...":"")}function c(a){return a.indexOf("//")===-1?"//"+a:a}function d(a,b){for(var c in b)b.hasOwnProperty(c)&&b[c]&&b[c].constructor===Object?(a[c]=a[c]||{},d(a[c],b[c])):a[c]=b[c];return a}function e(a){return a.replace(/[\-\[\]\/\{}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function f(a){return a.sort(function(a,b){return a.index-b.index})}function g(a,b){for(var c=f(b),d=0;d<c.length;d++)a+=" "+c[d].text;return a}function h(a,b){return a.exec(b)}function i(a,b){if(!a.singleEmbed||!a.served.length)return a.excludeEmbed.indexOf(b)==-1&&!("all"===a.excludeEmbed)}function j(a,b){return a.inlineEmbed.indexOf(b)>=0||"all"===a.inlineEmbed}function k(a){return a.videoWidth=a.videoWidth||a.videoHeight/3*4||800,a.videoHeight=a.videoHeight||a.videoWidth/4*3||600,a}function l(a){if(null===a||"object"!==("undefined"==typeof a?"undefined":X["typeof"](a)))return a;var b=a.constructor();for(var c in a)b[c]=l(a[c]);return b}function m(){return/((href|src)=["']|)(\b(https?|ftp|file):\/\/[^,.\s]+[^\s]*[^,.\s]+)|(?:https?:\/\/)?(?:(?:0rz\.tw)|(?:1link\.in)|(?:1url\.com)|(?:2\.gp)|(?:2big\.at)|(?:2tu\.us)|(?:3\.ly)|(?:307\.to)|(?:4ms\.me)|(?:4sq\.com)|(?:4url\.cc)|(?:6url\.com)|(?:7\.ly)|(?:a\.gg)|(?:a\.nf)|(?:aa\.cx)|(?:abcurl\.net)|(?:ad\.vu)|(?:adf\.ly)|(?:adjix\.com)|(?:afx\.cc)|(?:all\.fuseurl.com)|(?:alturl\.com)|(?:amzn\.to)|(?:ar\.gy)|(?:arst\.ch)|(?:atu\.ca)|(?:azc\.cc)|(?:b23\.ru)|(?:b2l\.me)|(?:bacn\.me)|(?:bcool\.bz)|(?:binged\.it)|(?:bit\.ly)|(?:buff\.ly)|(?:bizj\.us)|(?:bloat\.me)|(?:bravo\.ly)|(?:bsa\.ly)|(?:budurl\.com)|(?:canurl\.com)|(?:chilp\.it)|(?:chzb\.gr)|(?:cl\.lk)|(?:cl\.ly)|(?:clck\.ru)|(?:cli\.gs)|(?:cliccami\.info)|(?:clickthru\.ca)|(?:clop\.in)|(?:conta\.cc)|(?:cort\.as)|(?:cot\.ag)|(?:crks\.me)|(?:ctvr\.us)|(?:cutt\.us)|(?:dai\.ly)|(?:decenturl\.com)|(?:dfl8\.me)|(?:digbig\.com)|(?:digg\.com)|(?:disq\.us)|(?:dld\.bz)|(?:dlvr\.it)|(?:do\.my)|(?:doiop\.com)|(?:dopen\.us)|(?:easyuri\.com)|(?:easyurl\.net)|(?:eepurl\.com)|(?:eweri\.com)|(?:fa\.by)|(?:fav\.me)|(?:fb\.me)|(?:fbshare\.me)|(?:ff\.im)|(?:fff\.to)|(?:fire\.to)|(?:firsturl\.de)|(?:firsturl\.net)|(?:flic\.kr)|(?:flq\.us)|(?:fly2\.ws)|(?:fon\.gs)|(?:freak\.to)|(?:fuseurl\.com)|(?:fuzzy\.to)|(?:fwd4\.me)|(?:fwib\.net)|(?:g\.ro.lt)|(?:gizmo\.do)|(?:gl\.am)|(?:go\.9nl.com)|(?:go\.ign.com)|(?:go\.usa.gov)|(?:goo\.gl)|(?:goshrink\.com)|(?:gurl\.es)|(?:hex\.io)|(?:hiderefer\.com)|(?:hmm\.ph)|(?:href\.in)|(?:hsblinks\.com)|(?:htxt\.it)|(?:huff\.to)|(?:hulu\.com)|(?:hurl\.me)|(?:hurl\.ws)|(?:icanhaz\.com)|(?:idek\.net)|(?:ilix\.in)|(?:is\.gd)|(?:its\.my)|(?:ix\.lt)|(?:j\.mp)|(?:jijr\.com)|(?:kl\.am)|(?:klck\.me)|(?:korta\.nu)|(?:krunchd\.com)|(?:l9k\.net)|(?:lat\.ms)|(?:liip\.to)|(?:liltext\.com)|(?:linkbee\.com)|(?:linkbun\.ch)|(?:liurl\.cn)|(?:ln-s\.net)|(?:ln-s\.ru)|(?:lnk\.gd)|(?:lnk\.ms)|(?:lnkd\.in)|(?:lnkurl\.com)|(?:lru\.jp)|(?:lt\.tl)|(?:lurl\.no)|(?:macte\.ch)|(?:mash\.to)|(?:merky\.de)|(?:migre\.me)|(?:miniurl\.com)|(?:minurl\.fr)|(?:mke\.me)|(?:moby\.to)|(?:moourl\.com)|(?:mrte\.ch)|(?:myloc\.me)|(?:myurl\.in)|(?:n\.pr)|(?:nbc\.co)|(?:nblo\.gs)|(?:nn\.nf)|(?:not\.my)|(?:notlong\.com)|(?:nsfw\.in)|(?:nutshellurl\.com)|(?:nxy\.in)|(?:nyti\.ms)|(?:o-x\.fr)|(?:oc1\.us)|(?:om\.ly)|(?:omf\.gd)|(?:omoikane\.net)|(?:on\.cnn.com)|(?:on\.mktw.net)|(?:onforb\.es)|(?:orz\.se)|(?:ow\.ly)|(?:ping\.fm)|(?:pli\.gs)|(?:pnt\.me)|(?:politi\.co)|(?:post\.ly)|(?:pp\.gg)|(?:profile\.to)|(?:ptiturl\.com)|(?:pub\.vitrue.com)|(?:qlnk\.net)|(?:qte\.me)|(?:qu\.tc)|(?:qy\.fi)|(?:r\.im)|(?:rb6\.me)|(?:read\.bi)|(?:readthis\.ca)|(?:reallytinyurl\.com)|(?:redir\.ec)|(?:redirects\.ca)|(?:redirx\.com)|(?:retwt\.me)|(?:ri\.ms)|(?:rickroll\.it)|(?:riz\.gd)|(?:rt\.nu)|(?:ru\.ly)|(?:rubyurl\.com)|(?:rurl\.org)|(?:rww\.tw)|(?:s4c\.in)|(?:s7y\.us)|(?:safe\.mn)|(?:sameurl\.com)|(?:sdut\.us)|(?:shar\.es)|(?:shink\.de)|(?:shorl\.com)|(?:short\.ie)|(?:short\.to)|(?:shortlinks\.co.uk)|(?:shorturl\.com)|(?:shout\.to)|(?:show\.my)|(?:shrinkify\.com)|(?:shrinkr\.com)|(?:shrt\.fr)|(?:shrt\.st)|(?:shrten\.com)|(?:shrunkin\.com)|(?:simurl\.com)|(?:slate\.me)|(?:smallr\.com)|(?:smsh\.me)|(?:smurl\.name)|(?:sn\.im)|(?:snipr\.com)|(?:snipurl\.com)|(?:snurl\.com)|(?:sp2\.ro)|(?:spedr\.com)|(?:srnk\.net)|(?:srs\.li)|(?:starturl\.com)|(?:su\.pr)|(?:surl\.co.uk)|(?:surl\.hu)|(?:t\.cn)|(?:t\.co)|(?:t\.lh.com)|(?:ta\.gd)|(?:tbd\.ly)|(?:tcrn\.ch)|(?:tgr\.me)|(?:tgr\.ph)|(?:tighturl\.com)|(?:tiniuri\.com)|(?:tiny\.cc)|(?:tiny\.ly)|(?:tiny\.pl)|(?:tinylink\.in)|(?:tinyuri\.ca)|(?:tinyurl\.com)|(?:tl\.gd)|(?:tmi\.me)|(?:tnij\.org)|(?:tnw\.to)|(?:tny\.com)|(?:to\.ly)|(?:togoto\.us)|(?:totc\.us)|(?:toysr\.us)|(?:tpm\.ly)|(?:tr\.im)|(?:tra\.kz)|(?:trunc\.it)|(?:twhub\.com)|(?:twirl\.at)|(?:twitclicks\.com)|(?:twitterurl\.net)|(?:twitterurl\.org)|(?:twiturl\.de)|(?:twurl\.cc)|(?:twurl\.nl)|(?:u\.mavrev.com)|(?:u\.nu)|(?:u76\.org)|(?:ub0\.cc)|(?:ulu\.lu)|(?:updating\.me)|(?:ur1\.ca)|(?:url\.az)|(?:url\.co.uk)|(?:url\.ie)|(?:url360\.me)|(?:url4\.eu)|(?:urlborg\.com)|(?:urlbrief\.com)|(?:urlcover\.com)|(?:urlcut\.com)|(?:urlenco\.de)|(?:urli\.nl)|(?:urls\.im)|(?:urlshorteningservicefortwitter\.com)|(?:urlx\.ie)|(?:urlzen\.com)|(?:usat\.ly)|(?:use\.my)|(?:vb\.ly)|(?:vgn\.am)|(?:vl\.am)|(?:vm\.lc)|(?:w55\.de)|(?:wapo\.st)|(?:wapurl\.co.uk)|(?:wipi\.es)|(?:wp\.me)|(?:x\.vu)|(?:xr\.com)|(?:xrl\.in)|(?:xrl\.us)|(?:xurl\.es)|(?:xurl\.jp)|(?:y\.ahoo.it)|(?:yatuc\.com)|(?:ye\.pe)|(?:yep\.it)|(?:yfrog\.com)|(?:yhoo\.it)|(?:yiyd\.com)|(?:youtu\.be)|(?:yuarel\.com)|(?:z0p\.de)|(?:zi\.ma)|(?:zi\.mu)|(?:zipmyurl\.com)|(?:zud\.me)|(?:zurl\.ws)|(?:zz\.gd)|(?:zzang\.kr)|(?:›\.ws)|(?:✩\.ws)|(?:✿\.ws)|(?:❥\.ws)|(?:➔\.ws)|(?:➞\.ws)|(?:➡\.ws)|(?:➨\.ws)|(?:➯\.ws)|(?:➹\.ws)|(?:➽\.ws))\/[a-z0-9]*/gi}function n(a,b){return"string"!=typeof a[b]&&(a[b]=a[b].map(function(a){return a.toLowerCase()})),a}function o(a){return a=k(a),a=n(a,"excludeEmbed"),a=n(a,"inlineEmbed"),n(a,"openGraphExclude")}function p(a){return a[a.length-1]}function q(a){return":"===a[0]&&":"===p(a)&&a.substring(1,a.length-1)}function r(a,b){return b.template.vimeo(a,b)||b.template.youtube(a,b)}function s(a){if(a.customVideoClickHandler)return a.videoClickHandler(a,r);for(var b=document.getElementsByClassName(a.videoClickClass),c=0;c<b.length;c++)b[c].onclick=function(){a.onVideoShow();var b=this.getAttribute("data-ejs-url")+"?autoplay=true";this.parentNode.parentNode.innerHTML=r(b,a)}}function t(a){if(a.videojsOptions.width=a.videoWidth,a.videojsOptions.height=a.videoHeight,a.videoJS){if(!a.plugins.videojs)throw new ReferenceError("You have enabled videojs but you haven't loaded the library.Find it at http://videojs.com/");for(var b=a.plugins.videojs,c=a.input.getElementsByClassName("ejs-video-js"),d=0;d<c.length;d++)b(c[d],a.videojsOptions,function(){return a.videojsCallback()})}}function u(a){var b=a.options.link?new RegExp("([^>]*"+a.regex.source+")</a>","gm"):new RegExp("([^\\s]*"+a.regex.source+")","gm");return a.output=a.output.replace(b,function(b){var c=a.options.link?b.slice(0,-4):b;return a.options.served.indexOf(c)===-1?(a.options.served.push(c),a.options.link?a.options.inlineText?b+a.template(b.slice(0,-4)):a.template(b.slice(0,-4))+"</a>":a.options.inlineText?b+a.template(b):a.template(b)):b}),[a.output,a.embeds]}function v(a){for(var b=void 0;null!==(b=h(a.regex,a.input));){var c=b[0];if(!(a.options.served.indexOf(c)!==-1||a.options.served.length&&a.options.singleEmbed)){a.options.served.push(c);var d=a.template(c);a.embeds.push({text:d,index:b.index})}}return[a.output,a.embeds]}function w(a){return j(a.options,a.service)?u(a):v(a)}function x(a,b,c,d,e,f,g){return i(d,f)||i(d,f)&&g?ha(a,b,c,d,e,f):[b,c]}function y(a,b,c){var d=(a.options.link?c[0].slice(0,-4):c[0])||c[1];return a.options.served.indexOf(d)>=0?Promise.resolve(null):new Promise(function(e){b(a,c,d).then(function(b){return b?(a.options.served.push(d),void e(b)):e()})})}function z(a,b){for(var c=a.options.link?new RegExp("([^>]*"+a.regex.source+")</a>","gi"):new RegExp("([^\\s]*"+a.regex.source+")","gi"),d=void 0,e=[];null!==(d=h(c,a.output));)e.push(y(a,b,d));return new Promise(function(b){h.length?Promise.all(e).then(function(d){var e=0;a.output=a.output.replace(c,function(b){return a.options.link?a.options.inlineText?b+d[e++]:d[e]+"</a>":a.options.inlineText?b+d[e++]:d[e]}),b(a.output)}):b(a.output)})}function A(a,b,c){var d=c[0];if(!(a.options.served.indexOf(d)>=0))return new Promise(function(e){b(a,c,d,!0).then(function(b){b||e(),a.options.served.push(d),a.embeds.push({text:b,index:c.index}),e()})})}function B(a,b){for(var c=void 0,d=[];null!==(c=h(a.regex,a.input));)d.push(A(a,b,c));return new Promise(function(b){Promise.all(d).then(function(){b(a.embeds)})})}function C(a,b){return new Promise(function(c){j(a.options,a.service)?z(a,b).then(function(b){return c([b,a.embeds])}):B(a,b).then(function(b){return c([a.output,b])})})}function D(a){var b="http://maps.googleapis.com/maps/api/geocode/json?address="+a+"&sensor=false";return new Promise(function(a){fetch(b).then(function(a){return a.json()}).then(function(b){return a([b.results[0].geometry.location.lat,b.results[0].geometry.location.lng])})})}function E(a,b,c,d){var e=F(a);return d.template.gmap(b,c,e,d)}function F(a){return a.split("(")[1].split(")")[0]}function G(a){return a=a.replace(/&amp;/gm,""),a=a.replace(/&lt;/g,"<"),a=a.replace(/&gt;/g,">")}function H(a){return a=a.replace(/^([ \t]*)/g,""),a=a.replace(/[ \t]*$/g,"")}function I(a,b){return'<pre><code class="ejs-code hljs '+b+'">'+(a.value||a)+"</code></pre>"}function J(a){return{title:a.snippet.title,thumbnail:a.snippet.thumbnails.medium.url,rawDescription:a.snippet.description,views:a.statistics.viewCount,likes:a.statistics.likeCount,description:b(a.snippet.description,150),url:"https://www.youtube.com/watch?v="+a.id,id:a.id,host:"youtube"}}function K(a,b){var c="https://www.googleapis.com/youtube/v3/videos?id="+a+"&key="+b.googleAuthKey+"&part=snippet,statistics";return new Promise(function(a){fetch(c).then(function(a){return a.json()}).then(function(b){return a(b.items[0])})})}function L(a,b,c,d){var e=d?b[1]:b[2],f="https://www.youtube.com/embed/"+e;return a.options.videoDetails?new Promise(function(b){K(e,a.options).then(function(c){return b(ea(J(c),c,f,a.options))})}):new Promise(function(b){return b(r(f,a.options))})}function M(a,b){return{title:a.title,thumbnail:a.thumbnail_medium,rawDescription:a.description.replace(/\n/g,"<br/>").replace(/&#10;/g,"<br/>"),views:a.stats_number_of_plays,likes:a.stats_number_of_likes,description:b(a.description.replace(/((<|&lt;)br\s*\/*(>|&gt;)\r\n)/g," "),150),url:a.url,id:a.id,host:"vimeo"}}function N(a){var b="https://vimeo.com/api/v2/video/"+a+".json";return new Promise(function(a){fetch(b).then(function(a){return a.json()}).then(function(b){return a(b[0])})})}function O(a,c,d,e){var f=void 0;if(f=e?c[3]:a.options.link?c[0].slice(0,-4).split("/").slice(-1).pop():c[0].split("/").slice(-1).pop()){var g="https://player.vimeo.com/video/"+f;return a.options.videoDetails?new Promise(function(c){N(f).then(function(d){return c(ea(M(d,b),d,g,a.options))})}):new Promise(function(b){return b(r(g,a.options))})}}function P(a,b){var c="http://www.slideshare.net/api/oembed/2?url="+b+"&format=jsonp&maxwidth="+a.options.videoWidth+"&maxheight="+a.options.videoHeight;return new Promise(function(a){da(c,{credentials:"include"}).then(function(a){return a.json()}).then(function(b){return a(b.html)})})}function Q(a,b,c){return new Promise(function(b){P(a,c).then(function(c){return b(a.template(c))})})}function R(a,b){a=encodeURIComponent(a);var c=new Function("url","return `"+b.options.openGraphEndpoint+"`")(a);return new Promise(function(a){fetch(c).then(function(a){return a.json()}).then(function(c){return a(b.options.onOpenGraphFetch(c)||c)})})}function S(a,b,c){return c.match(a.excludeRegex)?Promise.resolve():new Promise(function(b){R(c,a).then(function(c){return b(c&&c.success?a.template(c):"")})})}function T(a,b){return b.template.github(a,b)}function U(a){var b="https://api.github.com/repos/"+a.user+"/"+a.repo;return new Promise(function(a){fetch(b).then(function(a){return a.json()}).then(function(b){return a(b)})})}function V(a,b,c,d){var e=d?{user:b[1],repo:b[2]}:{user:b[2],repo:b[3]};if(e.repo)return new Promise(function(b){U(e).then(function(c){return b(T(c,a.options))})})}var W="undefined"!=typeof window?window:"undefined"!=typeof global?global:this,X={};X["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},X.classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},X.createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),X.slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var Y={url:function(a,b){var d=b.linkOptions;return'<a href="'+c(a)+'" rel="'+d.rel+'" target="'+d.target+'">'+a+"</a>"},smiley:function(a,b,c){return'<span class="icon-emoticon" title="'+a+'">'+b+c+"</span>"},emoji:function(a){return'<span class="emoticon emoticon-'+a+'" title=":'+a+':"></span>'},audio:function(a){return'<div class="ejs-audio ejs-plyr ejs-embed"><audio src="'+a+'" controls class="video-js ejs-video-js"></audio></div>'},soundcloud:function(a,b){var c=b.soundCloudOptions;return'<div class="ejs-embed">\n\t\t<iframe height="160" scrolling="no" src="https://w.soundcloud.com/player/?url='+a+"\n\t\t&auto_play     = "+c.autoPlay+"\n\t\t&hide_related  = "+c.hideRelated+"\n\t\t&show_comments = "+c.showComments+"\n\t\t&show_user     = "+c.showUser+"\n\t\t&show_reposts  = "+c.showReposts+"\n\t\t&visual        = "+c.visual+"\n\t\t&download      = "+c.download+"\n\t\t&color         = "+c.themeColor+"\n\t\t&theme_color   = "+c.themeColor+'"></iframe>\n\t\t</div>'},spotify:function(a){var b=p(a.split("/"));return'<div class="ejs-embed"><iframe src="https://embed.spotify.com/?uri=spotify:track:'+b+'" height="80"></iframe></div>'},codepen:function(a,b){return'<div class="ejs-embed ejs-codepen"><iframe scrolling="no" height="'+b.codeEmbedHeight+'" src="'+a.replace(/\/pen\//,"/embed/")+"/?height="+b.codeEmbedHeight+'"></iframe></div>'},ideone:function(a,b){return'<div class="ejs-ideone ejs-embed"><iframe src="http://ideone.com/embed/'+a.split("/")[1]+'" frameborder="0" height="'+b.codeEmbedHeight+'"></iframe></div>'},jsbin:function(a,b){return'<div class="ejs-jsbin ejs-embed"><iframe height="'+b.codeEmbedHeight+'" class="jsbin-embed foo" src="http://'+a+'/embed?html,js,output"></iframe></div>'},jsfiddle:function(a,b){return a="/"==p(a)?a.slice(0,-1):a,a=a.indexOf("//")!==-1?a:"//"+a,'<div class="ejs-embed ejs-jsfiddle"><iframe height="'+b.codeEmbedHeight+'" src="'+a+'/embedded"></iframe></div>'},plunker:function(a,b){return'<div class="ejs-embed ejs-plunker"><iframe class="ne-plunker" src="http://embed.plnkr.co/'+a+'" height="'+b.codeEmbedHeight+'"></iframe></div>'},image:function(a){return'<div class="ejs-image ejs-embed"><div class="ne-image-wrapper"><img src="'+a+'"/></div></div>'},flickr:function(a,b){return'<div class="ejs-embed"><div class="ne-image-wrapper"><iframe src="'+c(a.split("/?")[0])+'/player/" width="'+b.videoWidth+'" height="'+b.videoHeight+'"></iframe></div></div>'},instagram:function(a,b){return'<div class="ejs-embed ejs-instagram"><iframe src="'+c(a.split("/?")[0])+'/embed/" height="'+b.videoHeight+'"></iframe></div>'},slideShare:function(a){return'<div class="ejs-embed ejs-slideshare">'+a+"</div>"},video:function(a){return'<div class="ejs-video ejs-embed"><div class="ejs-video-player"><div class="ejs-player ejs-plyr"><video src="'+a+'" class="ejs-video-js video-js" controls></video></div></div></div>'},dailymotion:function(a,b){var c=p(a.split("/"));return'<div class="ejs-video ejs-embed"><iframe src="http://www.dailymotion.com/embed/video/'+c+'" height="'+b.videoHeight+'" width="'+b.videoWidth+'"></iframe></div>'},liveleak:function(a,b){return'<div class="ejs-video ejs-embed"><iframe src="http://www.liveleak.com/e/'+a.split("=")[1]+'" height="'+b.videoHeight+'" width="'+b.videoWidth+'"></iframe></div>'},ted:function(a,b){var c=a.split("/"),d=c[c.length-1];return'<div class="ejs-embed ejs-ted"><iframe src="http://embed.ted.com/talks/'+d+'.html" height="'+b.videoHeight+'" width="'+b.videoWidth+'"></iframe></div>'},ustream:function(a,b){var c=a.split("/");return c.splice(1,0,"embed"),'<div class="ejs-embed ejs-ustream"><iframe src="//www.'+c.join("/")+'" height="'+b.videoHeight+'" width="'+b.videoWidth+'"></iframe></div>'},detailsVimeo:function(a,b,c){return'<div class="ejs-video ejs-embed"><div class="ejs-video-preview"><div class="ejs-video-thumb" data-ejs-url="'+c+'"><div class="ejs-thumb" style="background-image:url('+a.thumbnail+')"></div><i class="fa fa-play-circle-o"></i></div><div class="ejs-video-detail"><div class="ejs-video-title"><a href="'+a.url+'">'+a.title+'</a></div><div class="ejs-video-desc">'+a.description+'</div><div class="ejs-video-stats"><span><i class="fa fa-eye"></i>'+a.views+'</span><span><i class="fa fa-heart"></i>'+a.likes+"</span></div></div></div></div>"},detailsYoutube:function(a,b,c){return'<div class="ejs-video ejs-embed"><div class="ejs-video-preview"><div class="ejs-video-thumb" data-ejs-url="'+c+'"><div class="ejs-thumb" style="background-image:url('+a.thumbnail+')"></div><i class="fa fa-play-circle-o"></i></div><div class="ejs-video-detail"><div class="ejs-video-title"><a href="'+a.url+'">'+a.title+'</a></div><div class="ejs-video-desc">'+a.description+'</div><div class="ejs-video-stats"><span><i class="fa fa-eye"></i>'+a.views+'</span><span><i class="fa fa-heart"></i>'+a.likes+"</span></div></div></div></div>"},vine:function(a,b){var c=p(a.split("/")),d=b.vineOptions;return'<div class="ejs-vine"><iframe class="ejs-vine-iframe" src="https://vine.co/v/'+c+"/embed/"+d.type+'" height="'+d.height+'" width="'+d.width+'"></iframe></div>'},vimeo:function(a,b){return b.plyr?"<div class='ejs-plyr'><div data-video-type='vimeo' data-video-id='"+p(a.split("/"))+"'></div></div>":'<div class="ejs-video-player ejs-embed"><iframe src="'+a+'" frameBorder="0" width="'+b.videoWidth+'" height="'+b.videoHeight+'"></iframe></div>'},youtube:function(a,b){return b.plyr?"<div class='ejs-plyr'><div data-video-type='youtube' data-video-id='"+p(a.split("/"))+"'></div></div>":'<div class="ejs-video-player ejs-embed"><iframe src="'+a+'" frameBorder="0" width="'+b.videoWidth+'" height="'+b.videoHeight+'"></iframe></div>'},openGraph:function(a,b){return'<div class="ejs-embed ejs-ogp"><div class="ejs-ogp-thumb" style="background-image:url('+a.image+')"></div><div class="ejs-ogp-details"><div class="ejs-ogp-title"><a href="'+a.url+'" target="'+b.linkOptions.target+'">'+a.title+'</a></div><div class="ejs-ogb-details">'+a.description+"</div></div></div>"},github:function(a,b){return'<div class="ejs-embed ejs-github"><div class="ejs-ogp-thumb" style="background-image:url('+a.owner.avatar_url+')"></div><div class="ejs-ogp-details"><div class="ejs-ogp-title"><a href="'+a.html_url+'" target="'+b.linkOptions.target+'">'+a.full_name+'</a></div><div class="ejs-ogb-details">'+a.description+'</div><div class="ejs-github-stats"><span><i class="fa fa-star"></i>'+a.stargazers_count+'</span><span><i class="fa fa-code-fork"></i>'+a.network_count+"</span></div></div></div>"},gmap:function(a,b,c,d){var e=d.mapOptions;return"place"===e.mode?'<div class="ejs-embed ejs-map"><iframe width="'+d.videoWidth+'" height="'+d.videoHeight+'" src="https://www.google.com/maps/embed/v1/place?key='+d.googleAuthKey+"&q="+c+'"></iframe></div>':"streetview"===e.mode?'<div class="ejs-embed ejs-map"><iframe width="'+d.videoWidth+'" height="'+d.videoHeight+'" src="https://www.google.com/maps/embed/v1/streetview?key='+d.googleAuthKey+"&location="+a+","+b+'&heading=210&pitch=10&fov=35"></iframe></div>':"view"===e.mode?'<div class="ejs-embed ejs-map"><iframe width="'+d.videoWidth+'" height="'+d.videoHeight+'" src="https://www.google.com/maps/embed/v1/view?key='+d.googleAuthKey+"&center="+a+","+b+'&zoom=18&maptype=satellite"></iframe></div>':void 0}},Z={mentions:/(^|\s)(@[a-z0-9_-]+)/gi,hashtag:/(^|\s)(#[a-z\d-]+)/gi,basicAudio:/((?:https?):\/\/\S*\.(?:wav|mp3|ogg))/gi,soundCloud:/(soundcloud.com)\/[a-zA-Z0-9-_]+\/[a-zA-Z0-9-_]+/gi,spotify:/spotify.com\/track\/[a-zA-Z0-9_]+/gi,codepen:/http:\/\/codepen.io\/([A-Za-z0-9_]+)\/pen\/([A-Za-z0-9_]+)/gi,gist:/gist.github.com\/[a-zA-Z0-9_-]+\/([a-zA-Z0-9]+)/gi,highlightCode:/(`{3})(\s|[a-z]+)\s*([\s\S]*?[^`])\s*\1(?!`)/gm,inlineCode:/(`)\s*([\s\S]*?[^`])\s*\1(?!`)/gm,ideone:/ideone.com\/[a-zA-Z0-9]{6}/gi,jsbin:/jsbin.com\/[a-zA-Z0-9_]+\/[0-9_]+/gi,jsfiddle:/jsfiddle.net\/[a-zA-Z0-9_]+\/[a-zA-Z0-9_\/]+/gi,plunker:/plnkr.co\/edit\/[a-zA-Z0-9\?=]+/gi,basicImage:/((?:https?):\/\/\S*\.(?:gif|jpg|jpeg|tiff|png|svg|webp))/gi,flickr:/flickr.com\/[a-z]+\/[a-zA-Z@_$!\d\-\]+\/[\d]+/gi,instagram:/instagram.com\/p\/[a-zA-Z0-9_\/\?\-\=]+/gi,slideShare:/slideshare.net\/[a-zA-Z0-9_-]*\/[a-zA-Z0-9_-]*/gi,github:/[^\.]github.com\/([\w\.\-]+)\/([\w\.\-]+)/gi,basicVideo:/(?:https?):\/\/\S*\.(?:ogv|webm|mp4)/gi,dailymotion:/dailymotion.com\/video\/[a-zA-Z0-9-_]+/gi,liveleak:/liveleak.com\/view\?i=[a-zA-Z0-9_]+/gi,ted:/ted.com\/talks\/[a-zA-Z0-9_]+/gi,ustream:/ustream.tv\/[a-z\/0-9]*/gi,vimeo:/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)*/gi,vine:/vine.co\/v\/[a-zA-Z0-9]+/gi,youtube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/ytscreeningroom\?v=|\/feeds\/api\/videos\/|\/user\S*[^\w\-\s]|\S*[^\w\-\s]))([\w\-]{11})[?=&+%\w-]*/gi,gmap:/@\((.+)\)/gi,twitter:/https:\/\/twitter\.com\/\w+\/\w+\/\d+/gi,smileys:/(\:[\+\-\w]+\:|\<[\/\\]?3|[\(\)\\\D|\*\$][\-\^]?[\:\;\=]|[\:\;\=B8][\-\^]?[3DOPp\@\$\*\\\)\(\/\|])(?=\s|[\!\.\?]|$)/gi},$=function(a,b){return a.replace(Z.smileys,function(a){var c=q(a);return c?b.template.emoji(c,b):a})},_=[{text:":)",code:"&#xe60a"},{text:":D",code:"&#xe608"},{text:":d",code:"&#xe608"},{text:":(",code:"&#xe60e"},{text:":/",code:"&#xe620"},{text:":P",code:"&#xe60c"},{text:":p",code:"&#xe60c"},{text:"3:)",code:"&#xe618"},{text:"(^)",code:"&#xe607"},{text:";)",code:"&#xe610"},{text:":o",code:"&#xe61a"},{text:":O",code:"&#xe61a"},{text:"-_-",code:"&#xe61e"},{text:"(y)",code:"&#xe606"},{text:":*",code:"&#xe604"},{text:"&lt;3",code:"&#xe604"},{text:"<3",code:"&#xe604"},{text:"&lt;/3",code:"&#xe605"},{text:"</3",code:"&#xe605"},{text:"^_^",code:"&#xe612"},{text:"8-)",code:"&#xe614"},{text:"8|",code:"&#xe614"},{text:":S",code:"&#xe61c"},{text:":s",code:"&#xe61c"}],aa=function(a,b){var c=b.customFontIcons.length?b.customFontIcons:_,d=c.map(function(a){return e(a.text)}),f=new RegExp("(^|\\s)("+d.join("|")+")(?=\\s|$)","gi");return a.replace(f,function(a,f,g){var h=d.indexOf(e(g));if(h===-1)return a;var i=c[h].code;return b.template.smiley(g,f,i,b)})},ba=function(a,b){var c=b.linkOptions;return a.replace(m(),function(a){if(")"===p(a))return a;var d=p(a.split("."));return"/"===p(a)&&(a=a.slice(0,-1)),c.exclude.indexOf(d)===-1?b.template.url(a,b):a})},ca=a(function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["exports","module"],d);else if("undefined"!=typeof b&&"undefined"!=typeof a)d(b,a);else{var e={exports:{}};d(e.exports,e),c.fetchJsonp=e.exports}}(W,function(a,b){function c(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function d(a){try{delete window[a]}catch(b){window[a]=void 0}}function e(a){var b=document.getElementById(a);document.getElementsByTagName("head")[0].removeChild(b)}function f(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],f=a,h=b.timeout||g.timeout,i=b.jsonpCallback||g.jsonpCallback,j=void 0;return new Promise(function(a,g){var k=b.jsonpCallbackFunction||c(),l=i+"_"+k;window[k]=function(b){a({ok:!0,json:function(){return Promise.resolve(b)}}),j&&clearTimeout(j),e(l),d(k)},f+=f.indexOf("?")===-1?"?":"&";var m=document.createElement("script");m.setAttribute("src",""+f+i+"="+k),m.id=l,document.getElementsByTagName("head")[0].appendChild(m),j=setTimeout(function(){g(new Error("JSONP request to "+f+" timed out")),d(k),e(l)},h)})}var g={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};b.exports=f})}),da=ca&&"object"===("undefined"==typeof ca?"undefined":X["typeof"](ca))&&"default"in ca?ca["default"]:ca,ea=function(a,b,c,d){return"vimeo"===a.host?d.template.detailsVimeo(a,b,c,d):"youtube"===a.host?d.template.detailsYoutube(a,b,c,d):void 0},fa=function(a){if(a.plyr){if(!a.plugins.plyr)throw new ReferenceError("You have enabled plyr but you haven't loaded the library.Find it at https://plyr.io/");var b=a.plugins.plyr;b.setup(".ejs-plyr",a.plyrOptions)}},ga=function(a){for(var b=document.getElementsByClassName(a),c=0;c<b.length;c++)b[c].onclick=null},ha=function(a,b,c,d,e,f){var g={input:a,output:b,options:d,embeds:c,regex:e,service:f,template:function(a){return this.options.template[this.service](a,this.options)}};return w(g)},ia=function(){function a(b,c,d,e){X.classCallCheck(this,a),this.input=b,this.output=c,this.options=d,this.embeds=e,this.regex=Z.twitter,this.service="twitter",this.load=this.load.bind(this),"string"!=typeof this.options.input&&this.options.input.addEventListener("rendered",this.load,!1)}return X.createClass(a,[{key:"tweetData",value:function(a){var b=this.options.tweetOptions,c="https://api.twitter.com/1/statuses/oembed.json?omit_script=true&url="+a+"&maxwidth="+b.maxWidth+"&hide_media="+b.hideMedia+"&hide_thread="+b.hideThread+"&align="+b.align+"&lang="+b.lang;return new Promise(function(a){da(c,{credentials:"include"}).then(function(a){return a.json()}).then(function(b){return a(b)})})}},{key:"load",value:function(){var a=this.options.plugins.twitter;a.widgets.load(this.options.element),a.events.bind("loaded",this.options.onTweetsLoad)}},{key:"process",value:function(){var b=this;return new Promise(function(c){return C(b,a.urlToText).then(function(a){return c(a)})})}}],[{key:"urlToText",value:function(a,b,c){return new Promise(function(b){return a.tweetData(c).then(function(a){return b(a.html)})})}}]),a}();!function(a){function b(a){if("string"!=typeof a&&(a=String(a)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function c(a){return"string"!=typeof a&&(a=String(a)),a}function d(a){this.map={},a instanceof d?a.forEach(function(a,b){this.append(b,a)},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function e(a){return a.bodyUsed?Promise.reject(new TypeError("Already read")):void(a.bodyUsed=!0)}function f(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function g(a){var b=new FileReader;return b.readAsArrayBuffer(a),f(b)}function h(a){var b=new FileReader;return b.readAsText(a),f(b)}function i(){return this.bodyUsed=!1,this._initBody=function(a){if(this._bodyInit=a,"string"==typeof a)this._bodyText=a;else if(o.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(o.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(a){if(!o.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(a))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof a?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type&&this.headers.set("content-type",this._bodyBlob.type))},o.blob?(this.blob=function(){var a=e(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(g)},this.text=function(){var a=e(this);if(a)return a;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var a=e(this);return a?a:Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(l)}),this.json=function(){return this.text().then(JSON.parse)},this}function j(a){var b=a.toUpperCase();return p.indexOf(b)>-1?b:a}function k(a,b){b=b||{};var c=b.body;if(k.prototype.isPrototypeOf(a)){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,b.headers||(this.headers=new d(a.headers)),this.method=a.method,this.mode=a.mode,c||(c=a._bodyInit,a.bodyUsed=!0)}else this.url=a;if(this.credentials=b.credentials||this.credentials||"omit",!b.headers&&this.headers||(this.headers=new d(b.headers)),this.method=j(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&c)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(c)}function l(a){var b=new FormData;return a.trim().split("&").forEach(function(a){if(a){var c=a.split("="),d=c.shift().replace(/\+/g," "),e=c.join("=").replace(/\+/g," ");b.append(decodeURIComponent(d),decodeURIComponent(e))}}),b}function m(a){var b=new d,c=(a.getAllResponseHeaders()||"").trim().split("\n");return c.forEach(function(a){var c=a.trim().split(":"),d=c.shift().trim(),e=c.join(":").trim();b.append(d,e)}),b}function n(a,b){b||(b={}),this.type="default",this.status=b.status,this.ok=this.status>=200&&this.status<300,this.statusText=b.statusText,this.headers=b.headers instanceof d?b.headers:new d(b.headers),this.url=b.url||"",this._initBody(a)}if(!a.fetch){d.prototype.append=function(a,d){a=b(a),d=c(d);var e=this.map[a];e||(e=[],this.map[a]=e),e.push(d)},d.prototype["delete"]=function(a){delete this.map[b(a)]},d.prototype.get=function(a){var c=this.map[b(a)];return c?c[0]:null},d.prototype.getAll=function(a){return this.map[b(a)]||[]},d.prototype.has=function(a){return this.map.hasOwnProperty(b(a))},d.prototype.set=function(a,d){this.map[b(a)]=[c(d)]},d.prototype.forEach=function(a,b){Object.getOwnPropertyNames(this.map).forEach(function(c){this.map[c].forEach(function(d){a.call(b,d,c,this)},this)},this)};var o={blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a},p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];k.prototype.clone=function(){return new k(this)},i.call(k.prototype),i.call(n.prototype),n.prototype.clone=function(){return new n(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},n.error=function(){var a=new n(null,{status:0,statusText:""});return a.type="error",a};var q=[301,302,303,307,308];n.redirect=function(a,b){if(q.indexOf(b)===-1)throw new RangeError("Invalid status code");return new n(null,{status:b,headers:{location:a}})},a.Headers=d,a.Request=k,a.Response=n,a.fetch=function(a,b){return new Promise(function(c,d){function e(){return"responseURL"in g?g.responseURL:/^X-Request-URL:/m.test(g.getAllResponseHeaders())?g.getResponseHeader("X-Request-URL"):void 0}var f;f=k.prototype.isPrototypeOf(a)&&!b?a:new k(a,b);var g=new XMLHttpRequest;
g.onload=function(){var a=1223===g.status?204:g.status;if(a<100||a>599)return void d(new TypeError("Network request failed"));var b={status:a,statusText:g.statusText,headers:m(g),url:e()},f="response"in g?g.response:g.responseText;c(new n(f,b))},g.onerror=function(){d(new TypeError("Network request failed"))},g.ontimeout=function(){d(new TypeError("Network request failed"))},g.open(f.method,f.url,!0),"include"===f.credentials&&(g.withCredentials=!0),"responseType"in g&&o.blob&&(g.responseType="blob"),f.headers.forEach(function(a,b){g.setRequestHeader(b,a)}),g.send("undefined"==typeof f._bodyInit?null:f._bodyInit)})},a.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0);var ja=function(a,b,c,d){for(var e=void 0,f=[],g=[],i="map";null!==(e=h(Z.gmap,b));){c.served.push(e);var k="place"!==c.mapOptions.mode?D(e[0]):Promise.resolve([null,null]);f.push(k),g.push(e)}return new Promise(function(a){Promise.all(f).then(function(e){var h=function(){var a=X.slicedToArray(e[k],2),f=a[0],h=a[1],l=E(g[k][0],f,h,c);j(c,i)?b=b.replace(Z.gmap,function(a){return'<span class="ejs-location">'+F(a)+"</span>"+l}):(d.push({text:l,index:g[k][0].index}),b=b.replace(Z.gmap,function(a){return'<span class="ejs-location">'+F(a)+"</span>"}))};for(var k in f)h();a([b,d])})})},ka=function(a,b){if(!b.plugins.marked)throw new ReferenceError("marked.js is not loaded.");var c=b.plugins.marked,d=new c.Renderer;return d.link=function(a,c,d){return a.indexOf("&lt;/a")===-1?a:a.match(/&gt;(.+)&lt;\/a/gi)?(c||(c=""),'<a href="'+RegExp.$1+'" rel='+b.linkOptions.rel+'" target="'+b.linkOptions.target+'" title="'+c+'">'+d+"</a>"):void 0},d.image=function(a,b,c){return a.match(/&gt;(.+)&lt;\/a/gi)?(b||(b=""),'<div class="ejs-image ejs-embed"><div class="ne-image-wrapper"><img src="'+RegExp.$1+'" title="'+b+'" alt="'+c+'"/></div></div>'):'<div class="ejs-image ejs-embed"><div class="ne-image-wrapper"><img src="'+a+'" title="'+b+'" alt="'+c+'"/></div></div>'},d.paragraph=function(a){return"<p> "+a+" </p>"},c.Lexer.rules.gfm.heading=c.Lexer.rules.normal.heading,c.Lexer.rules.tables.heading=c.Lexer.rules.normal.heading,b.markedOptions.renderer=d,b.markedOptions.highlight=!1,c(a,b.markedOptions)},la=function(a,b){return a=a.replace(Z.inlineCode,function(a,b,c){return"<code>"+c+"</code>"}),a.replace(Z.highlightCode,function(a,c,d,e){var f=e;f=H(f),f=G(f),f=f.replace(/:\/\//g,"~P");var g=d.split("\n")[0],h=void 0,i=b.plugins.highlightjs;return g?h=i.highlightAuto(f,[g]):(h=i.highlightAuto(f),g=h.language),I(h,g)})},ma=function(){function a(b,c,d,e){var f=this;X.classCallCheck(this,a),this.input=b,this.output=c,this.options=d,this.embeds=e,this.regex=Z.gist,this.service="gist","string"!=typeof this.options.input&&this.options.input.addEventListener("rendered",function(){f.load()})}return X.createClass(a,[{key:"template",value:function(a){return'<div class="ejs-gist" data-src="'+a+'"></div>'}},{key:"load",value:function(){for(var a=this.options.input.getElementsByClassName("ejs-gist"),b=0;b<a.length;b++){var c=document.createElement("iframe");c.setAttribute("width","100%"),c.id="ejs-gist-"+b;var d=a[b];d.innerHTML="",d.appendChild(c);var e=a[b].getAttribute("data-src");e=e.indexOf("http")===-1?"https://"+e:e;var f='<html><base target="_parent"/><body onload="parent.document.getElementById(\'ejs-gist-'+b+'\').style.height=parseInt(document.body.scrollHeight)+20+\'px\'"><script type="text/javascript" src="'+e+'.js"></script></body></html>',g=c.document;c.contentDocument?g=c.contentDocument:c.contentWindow&&(g=c.contentWindow.document),g.open(),g.writeln(f),g.close()}}},{key:"process",value:function(){return w(this)}}]),a}(),na=function(a,b,c,d){var e={input:a,output:b,options:c,embeds:d,regex:Z.youtube,service:"youtube"};return new Promise(function(a){return C(e,L).then(function(b){return a(b)})})},oa=function(a,b,c,d){var e={input:a,output:b,options:c,embeds:d,regex:Z.vimeo,service:"vimeo"};return new Promise(function(a){return C(e,O).then(function(b){return a(b)})})},pa=function(a,b,c,d){var e={input:a,output:b,options:c,embeds:d,regex:Z.slideShare,service:"slideshare",template:function(a){return this.options.template.slideShare(a,this.options)}};return new Promise(function(a){return C(e,Q).then(function(b){return a(b)})})},qa=function(a,b,c,d){var e={input:a,output:b,options:c,embeds:d,service:"opengraph",regex:m(),excludeRegex:new RegExp([".mp4|.mp3|.gif|.pdf|.doc|.ppt|.docx|.jpg|.jpeg|.ogg"].concat(c.openGraphExclude).join("|"),"gi"),template:function(a){return this.options.template.openGraph(a,this.options)}};return new Promise(function(a){return C(e,S).then(function(b){return a(b)})})},ra=function(a,b,c,d){var e={input:a,output:b,options:c,embeds:d,service:"github",regex:Z.github};return new Promise(function(a){return C(e,V).then(function(b){return a(b)})})},sa=function(a,b){var c=Z.mentions;return a.replace(c,function(a,c,d){var e=d.split("@")[1];return c+b.mentionsUrl(e)})},ta=function(a,b){var c=Z.hashtag;return a.replace(c,function(a,c,d){var e=d.split("#")[1];return c+b.hashtagUrl(e)})},ua={},va={marked:!1,markedOptions:{},link:!0,linkOptions:{target:"self",exclude:["pdf"],rel:""},emoji:!0,customEmoji:[],fontIcons:!0,customFontIcons:[],highlightCode:!1,mentions:!1,hashtag:!1,videoJS:!1,videojsOptions:{fluid:!0,preload:"metadata"},plyr:!1,plyrOptions:{},locationEmbed:!0,mapOptions:{mode:"place"},tweetsEmbed:!1,tweetOptions:{maxWidth:550,hideMedia:!1,hideThread:!1,align:"none",lang:"en"},singleEmbed:!1,openGraphEndpoint:null,openGraphExclude:[],videoEmbed:!0,videoHeight:null,videoWidth:null,videoDetails:!0,audioEmbed:!0,imageEmbed:!0,excludeEmbed:[],inlineEmbed:[],inlineText:!0,codeEmbedHeight:500,vineOptions:{maxWidth:null,type:"postcard",responsive:!0,width:350,height:460},plugins:{marked:window.marked,videojs:window.videojs,plyr:window.plyr,highlightjs:window.hljs,prismjs:window.Prism,twitter:window.twttr},googleAuthKey:"",soundCloudOptions:{height:160,themeColor:"f50000",autoPlay:!1,hideRelated:!1,showComments:!0,showUser:!0,showReposts:!1,visual:!1,download:!1},videoClickClass:"ejs-video-thumb",customVideoClickHandler:!1,mentionsUrl:function(){},hashtagUrl:function(){},beforeEmbedJSApply:function(){},afterEmbedJSApply:function(){},onVideoShow:function(){},onTweetsLoad:function(){},videojsCallback:function(){},onOpenGraphFetch:function(){},onOpenGraphFail:function(){},videoClickHandler:function(){},served:[]},wa=[],xa=[],ya=[],za=function(){function a(b,c){X.classCallCheck(this,a);var e=l(va),f=l(ua),g=d(e,f);if(this.options=d(g,b),this.options.template=c||Y,"string"!=typeof this.options.input&&"object"!==X["typeof"](this.options.input))throw ReferenceError("You need to pass an element or the string that needs to be processed");this.input="object"===X["typeof"](this.options.input)?this.options.input.innerHTML:this.options.input}return X.createClass(a,[{key:"process",value:function(){var a=this,b=this.input;if(""===b)return Promise.resolve("");var c=o(this.options),d=[],e=b;return this.options.beforeEmbedJSApply(),new Promise(function(f){c.link&&(e=ba(b,c));var h=c.openGraphEndpoint?qa(b,e,c,d):Promise.resolve([e,d]);h.then(function(a){var d=X.slicedToArray(a,2),e=d[0],f=d[1];c.highlightCode&&(e=la(e,c)),c.marked&&(e=ka(e,c)),c.emoji&&(e=$(e,c)),c.fontIcons&&(e=aa(e,c)),c.mentions&&(e=sa(e,c)),c.hashtag&&(e=ta(e,c));var g=x(b,e,f,c,Z.ideone,"ideone"),h=X.slicedToArray(g,2);e=h[0],f=h[1];var j=x(b,e,f,c,Z.plunker,"plunker"),k=X.slicedToArray(j,2);e=k[0],f=k[1];var l=x(b,e,f,c,Z.jsbin,"jsbin"),m=X.slicedToArray(l,2);e=m[0],f=m[1];var n=x(b,e,f,c,Z.codepen,"codepen"),o=X.slicedToArray(n,2);e=o[0],f=o[1];var p=x(b,e,f,c,Z.jsfiddle,"jsfiddle"),q=X.slicedToArray(p,2);e=q[0],f=q[1];var r=x(b,e,f,c,Z.ted,"ted"),s=X.slicedToArray(r,2);e=s[0],f=s[1];var t=x(b,e,f,c,Z.dailymotion,"dailymotion"),u=X.slicedToArray(t,2);e=u[0],f=u[1];var v=x(b,e,f,c,Z.ustream,"ustream"),w=X.slicedToArray(v,2);e=w[0],f=w[1];var y=x(b,e,f,c,Z.liveleak,"liveleak"),z=X.slicedToArray(y,2);e=z[0],f=z[1];var A=x(b,e,f,c,Z.basicVideo,"video",c.videoEmbed),B=X.slicedToArray(A,2);e=B[0],f=B[1];var C=x(b,e,f,c,Z.vine,"vine"),D=X.slicedToArray(C,2);e=D[0],f=D[1];var E=x(b,e,f,c,Z.soundCloud,"soundcloud"),F=X.slicedToArray(E,2);e=F[0],f=F[1];var G=x(b,e,f,c,Z.spotify,"spotify"),H=X.slicedToArray(G,2);e=H[0],f=H[1];var I=x(b,e,f,c,Z.basicAudio,"audio",c.audioEmbed),J=X.slicedToArray(I,2);e=J[0],f=J[1];var K=x(b,e,f,c,Z.flickr,"flickr"),L=X.slicedToArray(K,2);e=L[0],f=L[1];var M=x(b,e,f,c,Z.instagram,"instagram"),N=X.slicedToArray(M,2);e=N[0],f=N[1];var O=x(b,e,f,c,Z.basicImage,"image",c.imageEmbed),P=X.slicedToArray(O,2);if(e=P[0],f=P[1],i(c,"gist")){var Q=new ma(b,e,c,f).process(),R=X.slicedToArray(Q,2);e=R[0],f=R[1]}return i(c,"youtube")?na(b,e,c,f):Promise.resolve([e,f])}).then(function(a){var d=X.slicedToArray(a,2),e=d[0],f=d[1];return i(c,"vimeo")?oa(b,e,c,f):Promise.resolve([e,f])}).then(function(a){var d=X.slicedToArray(a,2),e=d[0],f=d[1];return i(c,"github")?ra(b,e,c,f):Promise.resolve([e,f])}).then(function(a){var d=X.slicedToArray(a,2),e=d[0],f=d[1];return c.locationEmbed&&i(c,"gmap")?ja(b,e,c,f):Promise.resolve([e,f])}).then(function(a){var d=X.slicedToArray(a,2),e=d[0],f=d[1];return i(c,"slideshare")?pa(b,e,c,f):Promise.resolve([e,f])}).then(function(d){var e=X.slicedToArray(d,2),f=e[0],g=e[1];return c.tweetsEmbed&&i(c,"twitter")?(a.twitter=new ia(b,f,c,g),a.twitter.process()):Promise.resolve([f,g])}).then(function(b){var d=X.slicedToArray(b,2),e=d[0],h=d[1];a.data={input:c.input,output:e,options:c,inputString:a.input,services:c.served,template:c.template},f(g(e,h))})})}},{key:"render",value:function(){var a=this;if("string"==typeof this.options.input)throw new Error("You cannot call render method for a string");if(!this.options.input)throw new Error("You didn't pass an element while creating this instance. render() method can't work without an input element");return new Promise(function(b){a.process().then(function(c){a.options.input.innerHTML=c,a.applyListeners(),b(a.data)})})}},{key:"applyListeners",value:function(){t(this.options),fa(this.options),s(this.options);var a=new Event("rendered");this.options.input.dispatchEvent(a),this.options.afterEmbedJSApply()}},{key:"update",value:function(a,b){if(a&&(this.options=d(this.options,a)),b&&(this.options.template=b),!this.options.input||"string"!=typeof this.options.input&&"object"!==X["typeof"](this.options.input))throw ReferenceError("You need to pass an element or the string that needs to be processed");this.input="object"===X["typeof"](this.options.input)?this.options.input.innerHTML:this.options.input}},{key:"text",value:function(a){var b=this;this.process().then(function(c){return a(c,b.input)})}},{key:"destroy",value:function(){if("object"!==X["typeof"](this.options.input))throw new Error("destroy() method only works if an element had been passed in the options object");ga("ejs-video-thumb"),this.options.tweetsEmbed&&this.options.input.removeEventListener("rendered",this.twitter.load(),!1),this.options.input.innerHTML=this.input}}],[{key:"setOptions",value:function(a){ua=d(va,a)}},{key:"applyEmbedJS",value:function(b){for(var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y,e=document.querySelectorAll(b),f=0;f<e.length;f++)c.input=e[f],wa[f]=new a(c,d),ya[f]=wa[f].render();return new Promise(function(a){Promise.all(ya).then(function(b){a(b)})})}},{key:"destroyEmbedJS",value:function(){for(var a=0;a<wa.length;a++)wa[a].destroy()}},{key:"destroyAll",value:function(){for(var a=0;a<xa.length;a++)xa[a].destroy()}},{key:"Template",value:function(){return Y}}]),a}();return za});